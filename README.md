# Lab 03 — Ansible, работа с переменными и циклами

## Описание задания

Создать Ansible-плейбук, который выполняет следующие действия на целевых хостах:

1. **Устанавливает сканер NMAP.**
2. **Разбирает файл с целями (`targets.txt`) в список.**
3. **В цикле передаёт каждую цель на сканирование с помощью NMAP с параметром `-p 80`.**
4. **Собирает результаты сканирования (stdout).**
5. **Выводит результаты сканирования на экран.**


## Развёртывание виртуальных машин

### 1. Клонирование репозитория

```bash
git clone https://github.com/Lil-P0ly/situ_devops-lab_03.git
```

### 2. Генерация SSH-ключа (если ещё не создан)

```bash
ssh-keygen -t ed25519 -f ~/.ssh/runner_vagrant_key
```
### 3. Запуск виртуальной машины

```bash
vagrant up
```
### 4. Запуск Ansible-плейбука
```
```bash
ansible-playbook ./playbook.yml
```
> **Примечание:**  
> При использовании сети NAT, **Vagrant** автоматически пробрасывает SSH-порты для каждой виртуальной машины, начиная с `2222`, затем `2200`, `2201` и т.д

## Пример работы
![Снимок экрана от 2025-06-26 12-26-05](https://github.com/user-attachments/assets/98d34d94-cbb0-4262-b5c0-212148ac8d82)
